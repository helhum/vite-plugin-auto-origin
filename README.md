# Vite Auto Origin

This plugin for [vite](https://vitejs.dev/) aims to set the
[server.origin](https://vitejs.dev/config/server-options.html#server-origin)
configuration option automatically to the external URL of the vite dev server.

Setting server.origin is required in a backend integration scenario during development. In such case, the HTML document is served from one domain and references vite assets from the vite dev server domain. 

This leads to the vite dev server serving additional assets (e. g. referenced
images or font files) during development instead of the main application server.

This is useful in situations where the url structure of the application server
differs from the original directory structure or if certain files aren't
publicly accessible.

In thise case, you would need to specify `server.origin` manually in your
`vite.config.js`, which this plugin does automatically.

## Installation

```sh
npm install --save-dev vite-plugin-auto-origin
```

## Usage

vite.config.js:

```js
import autoOrigin from "vite-plugin-auto-origin";

export default defineConfig({
    plugins: [autoOrigin()],
    // ...
});
```

## Use case: TYPO3

This plugin was created to allow easier integration of vite with
[TYPO3 CMS](https://typo3.org/). In TYPO3 setups, the original asset sources
are usually located in `Resources/Private/`, which isn't served by the web server,
and only assets generated by `vite build` will be created in `public/_assets/vite/`
and thus will be publicly available. This is why the vite dev server needs to
serve the asset files in development context.

**[vite_asset_collector](https://github.com/s2b/vite-asset-collector)** implements
the server-side integration of vite and TYPO3.
